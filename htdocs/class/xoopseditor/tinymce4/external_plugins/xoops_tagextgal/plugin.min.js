// updated for TinyMCE v4 / 2014-05-17 / by goffy

tinymce.PluginManager.requireLangPack('xoops_tagextgal');

tinymce.PluginManager.add("xoops_tagextgal",function(t,url){

t.addButton("xoops_tagextgal",{
	text:"",
	icon:true,
	image:  url + '/img/extgallery.png',
	tooltip:"_XOOPS_EDITOR_TINYMCE_TAG_EXTGAL_TOOLTIP",
	
	onclick:function(){
		t.windowManager.open({
			title:"_XOOPS_EDITOR_TINYMCE_TAG_EXTGAL_TITLE",
			body:[{
				type:"textbox",
				name:"titre_photo",
				label:"_XOOPS_EDITOR_TINYMCE_TAG_EXTGAL_LABEL_PHOTO"},
				{type:"textbox",
				name:"id_photo",
				label:"_XOOPS_EDITOR_TINYMCE_TAG_EXTGAL_LABEL_ID"
			}],
			
	onsubmit:function(e){
		t.insertContent(
			"[gallery title='"+e.data.titre_photo+"']"+e.data.id_photo+"[/gallery]"
			)
		}
		})}
}),

t.addMenuItem("xoops_tagextgal",{
		text:"Tag eXtGallery",
		image:  url + '/img/extgallery.png',		
		tooltip:"_XOOPS_EDITOR_TINYMCE_TAG_EXTGAL_TOOLTIP",
		context:"insert",
		
		onclick:function(){
			t.windowManager.open({
			title:"_XOOPS_EDITOR_TINYMCE_TAG_EXTGAL_TITLE",
			body:[{
				type:"textbox",
				name:"titre_photo",
				label:"_XOOPS_EDITOR_TINYMCE_TAG_EXTGAL_LABEL_PHOTO"},
				{type:"textbox",
				name:"id_photo",
				label:"_XOOPS_EDITOR_TINYMCE_TAG_EXTGAL_LABEL_ID"
				}],
				
	onsubmit:function(e){
		t.insertContent(
			"[gallery title='"+e.data.titre_photo+"']"+e.data.id_photo+"[/gallery]"
			)
		}
				
			})}})});

